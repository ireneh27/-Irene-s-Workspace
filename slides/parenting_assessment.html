<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>育儿风格深度评估</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            line-height: 1.8;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 50px;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 15px;
            font-size: 2.3em;
        }

        .intro {
            background: #f0f4ff;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 35px;
            border-left: 4px solid #667eea;
        }

        .intro h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .intro p {
            color: #555;
            margin-bottom: 12px;
            font-size: 1.05em;
        }

        .intro .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
            border-radius: 8px;
            color: #856404;
        }

        .question-container {
            margin-bottom: 40px;
            padding: 30px;
            background: #fafafa;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .question-number {
            background: #667eea;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }

        .question-type {
            background: #e8eaf6;
            color: #667eea;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .question-text {
            font-size: 1.15em;
            color: #333;
            margin-bottom: 20px;
            font-weight: 500;
            line-height: 1.8;
        }

        .question-subtext {
            font-size: 0.95em;
            color: #666;
            margin-bottom: 15px;
            font-style: italic;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .option:hover {
            border-color: #667eea;
            background: #f8f9ff;
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }

        .option input[type="radio"] {
            margin-right: 15px;
            cursor: pointer;
            width: 20px;
            height: 20px;
            accent-color: #667eea;
            flex-shrink: 0;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            color: #555;
            font-size: 1em;
            line-height: 1.6;
        }

        .option input[type="radio"]:checked ~ label {
            color: #333;
            font-weight: 600;
        }

        .option.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .frequency-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
        }

        .frequency-option {
            text-align: center;
            padding: 15px 10px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .frequency-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }

        .frequency-option input[type="radio"] {
            display: none;
        }

        .frequency-option.selected {
            border-color: #667eea;
            background: #f0f4ff;
            font-weight: 600;
        }

        .frequency-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .frequency-desc {
            font-size: 0.85em;
            color: #666;
        }

        .slider-container {
            padding: 20px 10px;
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
        }

        .slider-label {
            font-size: 0.9em;
            color: #666;
            max-width: 45%;
            text-align: center;
        }

        .slider-label.left {
            text-align: left;
        }

        .slider-label.right {
            text-align: right;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e0e0e0;
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
        }

        .slider-value {
            text-align: center;
            margin-top: 10px;
            font-weight: 600;
            color: #667eea;
        }

        .progress-section {
            position: sticky;
            top: 20px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
        }

        .progress-text {
            text-align: center;
            color: #666;
            font-size: 0.95em;
            font-weight: 500;
        }

        .button-container {
            text-align: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 18px 60px;
            font-size: 1.15em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
        }

        .error-message {
            color: #d32f2f;
            text-align: center;
            margin-top: 20px;
            font-weight: 500;
            padding: 20px;
            background: #ffebee;
            border-radius: 8px;
            display: none;
            border: 2px solid #d32f2f;
            font-size: 1.05em;
            line-height: 1.8;
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .results {
            display: none;
        }

        .results.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .results-header h2 {
            color: #333;
            font-size: 2.3em;
            margin-bottom: 15px;
        }

        .consistency-warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 8px;
        }

        .consistency-warning h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .consistency-warning p {
            color: #856404;
            line-height: 1.8;
        }

        .scores-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            margin-bottom: 40px;
        }

        .score-card {
            background: #fafafa;
            padding: 25px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }

        .score-card h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .score-bar-container {
            background: #e0e0e0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .score-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 15px;
            color: white;
            font-weight: 700;
            transition: width 1s ease;
        }

        .style-result {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }

        .style-result h3 {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .detailed-analysis {
            background: #fafafa;
            padding: 35px;
            border-radius: 12px;
            margin-bottom: 30px;
        }

        .analysis-section {
            margin-bottom: 25px;
        }

        .analysis-section h4 {
            color: #667eea;
            margin-bottom: 12px;
            font-size: 1.15em;
        }

        .analysis-section ul {
            list-style-position: inside;
            color: #555;
            line-height: 2.2;
        }

        .analysis-section p {
            color: #555;
            line-height: 1.9;
        }

        @media (max-width: 768px) {
            .container { padding: 30px 20px; }
            h1 { font-size: 1.8em; }
            .scores-grid { grid-template-columns: 1fr; }
            .frequency-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎯 育儿风格深度评估</h1>
        
        <div class="intro">
            <h3>这次，让我们更真实一点</h3>
            <p>我们都知道，育儿书上说的和实际做到的常常不一样。尤其是在累了一天、孩子不听话、工作压力大的时候。</p>
            <p>这个测评设计了多种题型，有些问题会从不同角度反复验证。<strong>请根据您大多数时候的真实反应来回答</strong>，而不是您认为"应该"怎么做。</p>
            
            <div class="warning">
                <strong>⚠️ 温馨提示：</strong>这个测评包含一致性检测。如果回答前后矛盾较大，系统会在结果中提醒您。只有诚实的回答才能得到有价值的反馈。
            </div>
        </div>

        <div class="progress-section">
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar"></div>
            </div>
            <div class="progress-text" id="progressText">已完成 0 / 24 题</div>
        </div>

        <form id="assessmentForm">
            <!-- 情境选择题 - 情感连接 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 1 题</span>
                    <span class="question-type">情境题</span>
                </div>
                <div class="question-text">晚上9点，您刚结束一天的工作回到家，累得只想躺下。孩子跑过来说："妈妈/爸爸，你看我今天画的画！" 您通常会？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q1c" name="q1" value="3">
                        <label for="q1c">说"妈妈/爸爸累了，等会儿再看好吗"</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1a" name="q1" value="5">
                        <label for="q1a">即使很累也会认真看，问问他画的是什么，夸夸他</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1e" name="q1" value="1">
                        <label for="q1e">有点烦躁，说"别烦我，自己玩去"</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1b" name="q1" value="4">
                        <label for="q1b">会看一眼，说"画得不错"，但可能没有很仔细</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q1d" name="q1" value="2">
                        <label for="q1d">敷衍地说"很好"，然后去忙自己的事</label>
                    </div>
                </div>
            </div>

            <!-- 频率题 - 规矩边界 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 2 题</span>
                    <span class="question-type">频率题</span>
                </div>
                <div class="question-text">过去一个月内，孩子违反了您定的规矩后，您真的执行了后果的次数大概是？</div>
                <div class="question-subtext">（比如说好看一集动画片，看了三集；说好8点睡觉，拖到9点）</div>
                <div class="frequency-grid">
                    <div class="frequency-option" onclick="selectFrequency(this, 'q2', '1')">
                        <input type="radio" id="q2a" name="q2" value="1">
                        <label>
                            <span class="frequency-label">几乎不执行</span>
                            <span class="frequency-desc">0-20%</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q2', '2')">
                        <input type="radio" id="q2b" name="q2" value="2">
                        <label>
                            <span class="frequency-label">偶尔执行</span>
                            <span class="frequency-desc">20-40%</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q2', '3')">
                        <input type="radio" id="q2c" name="q2" value="3">
                        <label>
                            <span class="frequency-label">一半一半</span>
                            <span class="frequency-desc">40-60%</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q2', '4')">
                        <input type="radio" id="q2d" name="q2" value="4">
                        <label>
                            <span class="frequency-label">大部分执行</span>
                            <span class="frequency-desc">60-85%</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q2', '5')">
                        <input type="radio" id="q2e" name="q2" value="5">
                        <label>
                            <span class="frequency-label">基本都执行</span>
                            <span class="frequency-desc">85-100%</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- 冲突情境题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 3 题</span>
                    <span class="question-type">冲突情境</span>
                </div>
                <div class="question-text">孩子想买一个您觉得没必要的玩具，哭闹不止。这时恰好有朋友在旁边。您会？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q3c" name="q3" value="2">
                        <label for="q3c">为了避免尴尬，先买了，回家再教育</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3a" name="q3" value="5">
                        <label for="q3a">蹲下来平静地和他说为什么不能买，不管别人怎么看，坚持不买</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3d" name="q3" value="1">
                        <label for="q3d">当众训斥他"不许哭"，强行拖走</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q3b" name="q3" value="3">
                        <label for="q3b">想坚持但觉得当众说教很尴尬，可能会妥协</label>
                    </div>
                </div>
            </div>

            <!-- 反向题 - 测试诚实度 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 4 题</span>
                    <span class="question-type">真实感受</span>
                </div>
                <div class="question-text">诚实地说，过去一周内，您有几次因为自己的情绪（累、烦、生气）对孩子发过火或说过重话？</div>
                <div class="frequency-grid">
                    <div class="frequency-option" onclick="selectFrequency(this, 'q4', '5')">
                        <input type="radio" id="q4a" name="q4" value="5">
                        <label>
                            <span class="frequency-label">0次</span>
                            <span class="frequency-desc">完全没有</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q4', '4')">
                        <input type="radio" id="q4b" name="q4" value="4">
                        <label>
                            <span class="frequency-label">1-2次</span>
                            <span class="frequency-desc">偶尔</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q4', '3')">
                        <input type="radio" id="q4c" name="q4" value="3">
                        <label>
                            <span class="frequency-label">3-4次</span>
                            <span class="frequency-desc">有时候</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q4', '2')">
                        <input type="radio" id="q4d" name="q4" value="2">
                        <label>
                            <span class="frequency-label">5-6次</span>
                            <span class="frequency-desc">经常</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q4', '1')">
                        <input type="radio" id="q4e" name="q4" value="1">
                        <label>
                            <span class="frequency-label">几乎每天</span>
                            <span class="frequency-desc">很频繁</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- 滑块题 - 情感连接 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 5 题</span>
                    <span class="question-type">程度评估</span>
                </div>
                <div class="question-text">在0-10分中，您觉得孩子愿意主动跟您分享心事的程度有多高？</div>
                <div class="slider-container">
                    <div class="slider-labels">
                        <span class="slider-label left">完全不愿意，有事也不跟我说</span>
                        <span class="slider-label right">非常愿意，有什么都会告诉我</span>
                    </div>
                    <input type="range" id="q5" name="q5" min="0" max="10" value="5" oninput="updateSliderValue(this, 'q5-value')">
                    <div class="slider-value" id="q5-value">5 分</div>
                </div>
            </div>

            <!-- 情境题 - 规矩边界 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 6 题</span>
                    <span class="question-type">情境题</span>
                </div>
                <div class="question-text">周五晚上，孩子恳求说明天朋友生日，能不能破例晚睡。您之前定的规矩是周末也要10点前睡。您会？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q6e" name="q6" value="1">
                        <label for="q6e">我们家本来就没这个规矩，他想睡多晚睡多晚</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6b" name="q6" value="4">
                        <label for="q6b">通常会同意，但也会强调这是特例</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6d" name="q6" value="2">
                        <label for="q6d">直接拒绝，规矩就是规矩，没有例外</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6a" name="q6" value="5">
                        <label for="q6a">和他讨论，如果真的很重要可以破例，但要提前午睡，而且下次不能再要求</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q6c" name="q6" value="3">
                        <label for="q6c">犹豫不决，最后可能同意可能不同意</label>
                    </div>
                </div>
            </div>

            <!-- 行为频率题 - 情感连接 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 7 题</span>
                    <span class="question-type">行为频率</span>
                </div>
                <div class="question-text">过去一周，您主动抱过孩子、亲过他、或者摸他的头几次？</div>
                <div class="question-subtext">（请尽量回忆具体次数，不要估算理想次数）</div>
                <div class="frequency-grid">
                    <div class="frequency-option" onclick="selectFrequency(this, 'q7', '1')">
                        <input type="radio" id="q7a" name="q7" value="1">
                        <label>
                            <span class="frequency-label">0次</span>
                            <span class="frequency-desc">没有</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q7', '2')">
                        <input type="radio" id="q7b" name="q7" value="2">
                        <label>
                            <span class="frequency-label">1-2次</span>
                            <span class="frequency-desc">很少</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q7', '3')">
                        <input type="radio" id="q7c" name="q7" value="3">
                        <label>
                            <span class="frequency-label">3-5次</span>
                            <span class="frequency-desc">偶尔</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q7', '4')">
                        <input type="radio" id="q7d" name="q7" value="4">
                        <label>
                            <span class="frequency-label">6-10次</span>
                            <span class="frequency-desc">经常</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q7', '5')">
                        <input type="radio" id="q7e" name="q7" value="5">
                        <label>
                            <span class="frequency-label">每天都有</span>
                            <span class="frequency-desc">多次</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- 反向验证题 - 规矩边界 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 8 题</span>
                    <span class="question-type">反向验证</span>
                </div>
                <div class="question-text">当您特别累或心情不好时，孩子犯了平时也会犯的小错（比如打翻水杯），您的反应和平时比：</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q8d" name="q8" value="2">
                        <label for="q8d">可能会发火或说重话</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8b" name="q8" value="4">
                        <label for="q8b">会有一点不耐烦，但不会发脾气</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8a" name="q8" value="5">
                        <label for="q8a">基本一样，我会控制自己的情绪</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8e" name="q8" value="1">
                        <label for="q8e">完全忍不住，会大声吼他</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q8c" name="q8" value="3">
                        <label for="q8c">说话语气会比较重</label>
                    </div>
                </div>
            </div>

            <!-- 情境冲突题 - 情感vs规矩 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 9 题</span>
                    <span class="question-type">两难选择</span>
                </div>
                <div class="question-text">孩子考试没考好，回家后趴在床上哭。这时已经是晚上8点，按规定8点半要开始写作业。您会？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q9c" name="q9" value="3">
                        <label for="q9c">简单安慰几句，就让他去写作业，"哭也没用"</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9a" name="q9" value="5">
                        <label for="q9a">先坐在旁边陪他、安慰他，等情绪平复了再说作业的事，可以晚点开始</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9e" name="q9" value="1">
                        <label for="q9e">不管他，让他自己处理情绪</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9b" name="q9" value="4">
                        <label for="q9b">给他一些时间平复情绪，但会提醒还有作业要做</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q9d" name="q9" value="2">
                        <label for="q9d">会批评他不该哭，"考不好还有脸哭，赶紧去学习"</label>
                    </div>
                </div>
            </div>

            <!-- 滑块题 - 规矩一致性 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 10 题</span>
                    <span class="question-type">自我评估</span>
                </div>
                <div class="question-text">0-10分中，您觉得自己在执行规则时的前后一致性有多高？</div>
                <div class="question-subtext">（0分=完全看心情，10分=永远说到做到）</div>
                <div class="slider-container">
                    <div class="slider-labels">
                        <span class="slider-label left">完全不一致，今天说的明天就忘</span>
                        <span class="slider-label right">非常一致，说到一定做到</span>
                    </div>
                    <input type="range" id="q10" name="q10" min="0" max="10" value="5" oninput="updateSliderValue(this, 'q10-value')">
                    <div class="slider-value" id="q10-value">5 分</div>
                </div>
            </div>

            <!-- 具体行为题 - 监督程度 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 11 题</span>
                    <span class="question-type">行为检测</span>
                </div>
                <div class="question-text">过去一个月，您检查过孩子书包、翻看过他手机/平板、或者问过老师孩子在学校的表现吗？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q11c" name="q11" value="3">
                        <label for="q11c">偶尔会，但不是每个月都做</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q11e" name="q11" value="1">
                        <label for="q11e">从不做，觉得侵犯隐私或没必要</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q11a" name="q11" value="5">
                        <label for="q11a">定期都会做，我清楚了解他的学习和社交情况</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q11d" name="q11" value="2">
                        <label for="q11d">很少做，除非出了问题</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q11b" name="q11" value="4">
                        <label for="q11b">经常会做其中一两项</label>
                    </div>
                </div>
            </div>

            <!-- 情感质量题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 12 题</span>
                    <span class="question-type">质量评估</span>
                </div>
                <div class="question-text">当您和孩子"共处"时（比如一起吃饭、在车上），您在做什么？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q12d" name="q12" value="2">
                        <label for="q12d">基本在看手机或做自己的事，很少真正交流</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q12b" name="q12" value="4">
                        <label for="q12b">大部分时间专注陪伴，偶尔看看手机</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q12e" name="q12" value="1">
                        <label for="q12e">各做各的，没什么互动</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q12c" name="q12" value="3">
                        <label for="q12c">人在旁边，但经常刷手机或想自己的事</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q12a" name="q12" value="5">
                        <label for="q12a">放下手机，专心和他聊天、玩耍或者享受安静的陪伴</label>
                    </div>
                </div>
            </div>

            <!-- 反向题 - 负面情绪承认 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 13 题</span>
                    <span class="question-type">真实感受</span>
                </div>
                <div class="question-text">诚实地说，您有过这样的想法吗："如果能有一天完全不用管孩子就好了"</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q13c" name="q13" value="3">
                        <label for="q13c">偶尔会闪过这个念头</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q13e" name="q13" value="1">
                        <label for="q13e">从来没有，我总是享受和孩子在一起的每一刻</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q13a" name="q13" value="5">
                        <label for="q13a">经常有，育儿确实很累，想要自己的空间很正常</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q13d" name="q13" value="2">
                        <label for="q13d">很少这样想</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q13b" name="q13" value="4">
                        <label for="q13b">有时会这么想，尤其在特别累的时候</label>
                    </div>
                </div>
            </div>

            <!-- 期望管理题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 14 题</span>
                    <span class="question-type">期望程度</span>
                </div>
                <div class="question-text">关于孩子的成绩和表现，您心里真实的期望是：</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q14c" name="q14" value="3">
                        <label for="q14c">希望他名列前茅，至少前几名</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q14e" name="q14" value="1">
                        <label for="q14e">完全不在意，快乐就好</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q14b" name="q14" value="4">
                        <label for="q14b">希望他保持中上水平，不需要特别拔尖</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q14a" name="q14" value="5">
                        <label for="q14a">希望他尽力就好，注重过程而不是结果</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q14d" name="q14" value="2">
                        <label for="q14d">必须是第一名或者接近第一</label>
                    </div>
                </div>
            </div>

            <!-- 冲突处理题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 15 题</span>
                    <span class="question-type">冲突处理</span>
                </div>
                <div class="question-text">孩子和您大吵一架后，摔门进了房间。一小时后，您会？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q15c" name="q15" value="3">
                        <label for="q15c">等他主动出来道歉</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q15a" name="q15" value="5">
                        <label for="q15a">主动去敲门，心平气和地和他谈谈，听听他的想法</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q15e" name="q15" value="1">
                        <label for="q15e">不理他，冷战几天</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q15d" name="q15" value="2">
                        <label for="q15d">让他自己反省，我不会先妥协</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q15b" name="q15" value="4">
                        <label for="q15b">等双方都冷静后，会找他好好聊</label>
                    </div>
                </div>
            </div>

            <!-- 时间投入题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 16 题</span>
                    <span class="question-type">时间统计</span>
                </div>
                <div class="question-text">昨天（或最近的工作日），您实际和孩子有质量互动的时间大约多久？</div>
                <div class="question-subtext">（排除吃饭、接送路上各玩手机等"人在心不在"的时间）</div>
                <div class="frequency-grid">
                    <div class="frequency-option" onclick="selectFrequency(this, 'q16', '1')">
                        <input type="radio" id="q16a" name="q16" value="1">
                        <label>
                            <span class="frequency-label">不到15分钟</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q16', '2')">
                        <input type="radio" id="q16b" name="q16" value="2">
                        <label>
                            <span class="frequency-label">15-30分钟</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q16', '3')">
                        <input type="radio" id="q16c" name="q16" value="3">
                        <label>
                            <span class="frequency-label">30-60分钟</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q16', '4')">
                        <input type="radio" id="q16d" name="q16" value="4">
                        <label>
                            <span class="frequency-label">1-2小时</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q16', '5')">
                        <input type="radio" id="q16e" name="q16" value="5">
                        <label>
                            <span class="frequency-label">2小时以上</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- 规则解释题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 17 题</span>
                    <span class="question-type">沟通方式</span>
                </div>
                <div class="question-text">当定一个新规矩时，您通常会？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q17d" name="q17" value="2">
                        <label for="q17d">直接宣布，"这是规矩，照做就是"</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q17b" name="q17" value="4">
                        <label for="q17b">会说明原因，但不会过多讨论</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q17a" name="q17" value="5">
                        <label for="q17a">详细解释原因，听他的意见，最后一起确定或由我做主</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q17e" name="q17" value="1">
                        <label for="q17e">我们家很少有明确的规矩</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q17c" name="q17" value="3">
                        <label for="q17c">简单说一下，让他照做</label>
                    </div>
                </div>
            </div>

            <!-- 情绪识别题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 18 题</span>
                    <span class="question-type">敏感度测试</span>
                </div>
                <div class="question-text">孩子今天回家后比平时安静，吃饭也不太说话。您能察觉到吗？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q18c" name="q18" value="3">
                        <label for="q18c">可能注意到，也可能没注意到</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q18a" name="q18" value="5">
                        <label for="q18a">立刻就注意到了，会主动关心问他怎么了</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q18e" name="q18" value="1">
                        <label for="q18e">基本不会注意这些细节</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q18b" name="q18" value="4">
                        <label for="q18b">会注意到，找机会问问</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q18d" name="q18" value="2">
                        <label for="q18d">除非他表现得很明显，否则不太会注意</label>
                    </div>
                </div>
            </div>

            <!-- 责任培养题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 19 题</span>
                    <span class="question-type">实际行为</span>
                </div>
                <div class="question-text">孩子目前有哪些固定要做的家务或责任？（可以多选的话请选实际在做的）</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q19d" name="q19" value="2">
                        <label for="q19d">偶尔让他帮忙，没有固定的</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q19b" name="q19" value="4">
                        <label for="q19b">有1-2项固定家务，经常能做到</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q19e" name="q19" value="1">
                        <label for="q19e">基本不让他做家务，学习就够忙了</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q19a" name="q19" value="5">
                        <label for="q19a">有3项以上固定家务，而且基本能自觉完成</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q19c" name="q19" value="3">
                        <label for="q19c">有安排但执行不稳定，需要经常提醒</label>
                    </div>
                </div>
            </div>

            <!-- 滑块题 - 孩子独立性 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 20 题</span>
                    <span class="question-type">结果评估</span>
                </div>
                <div class="question-text">在0-10分中，您觉得孩子目前的独立性和自理能力如何？</div>
                <div class="question-subtext">（0分=什么都要人帮，10分=同龄人中特别独立）</div>
                <div class="slider-container">
                    <div class="slider-labels">
                        <span class="slider-label left">完全依赖大人，什么都不会</span>
                        <span class="slider-label right">非常独立，很多事自己能搞定</span>
                    </div>
                    <input type="range" id="q20" name="q20" min="0" max="10" value="5" oninput="updateSliderValue(this, 'q20-value')">
                    <div class="slider-value" id="q20-value">5 分</div>
                </div>
            </div>

            <!-- 反向验证 - 对孩子意见的态度 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 21 题</span>
                    <span class="question-type">态度测试</span>
                </div>
                <div class="question-text">您问孩子"今晚想吃什么"，他说了一个您不太想做的菜。您会？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q21b" name="q21" value="4">
                        <label for="q21b">会和他商量，看能不能改成另一个菜</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q21d" name="q21" value="2">
                        <label for="q21d">直接拒绝，"听我的"</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q21a" name="q21" value="5">
                        <label for="q21a">尊重他的选择，就做那个菜（除非有特殊原因）</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q21c" name="q21" value="3">
                        <label for="q21c">说"那个太麻烦了"，还是做我想做的</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q21e" name="q21" value="1">
                        <label for="q21e">不会问他想吃什么，我做什么他吃什么</label>
                    </div>
                </div>
            </div>

            <!-- 压力情境题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 22 题</span>
                    <span class="question-type">压力情境</span>
                </div>
                <div class="question-text">您工作上出了大问题，老板刚批评了您。回家路上接到老师电话说孩子在学校打人了。您到家后会？</div>
                <div class="options">
                    <div class="option">
                        <input type="radio" id="q22c" name="q22" value="3">
                        <label for="q22c">会比平时更严厉地批评他</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q22e" name="q22" value="1">
                        <label for="q22e">完全管不了那么多了，该怎么发火就怎么发火</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q22b" name="q22" value="4">
                        <label for="q22b">虽然很烦躁但会尽量控制，不会太过分</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q22a" name="q22" value="5">
                        <label for="q22a">深呼吸让自己冷静，告诉自己不要把工作情绪带给孩子，平静地了解情况</label>
                    </div>
                    <div class="option">
                        <input type="radio" id="q22d" name="q22" value="2">
                        <label for="q22d">可能会把气撒在他身上，大发雷霆</label>
                    </div>
                </div>
            </div>

            <!-- 一致性验证题 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 23 题</span>
                    <span class="question-type">一致性检测</span>
                </div>
                <div class="question-text">过去一个月，您说"如果你再这样我就XXX"（比如不给看电视、没收手机等），最后真的执行了几次？</div>
                <div class="frequency-grid">
                    <div class="frequency-option" onclick="selectFrequency(this, 'q23', '1')">
                        <input type="radio" id="q23a" name="q23" value="1">
                        <label>
                            <span class="frequency-label">基本没执行</span>
                            <span class="frequency-desc">空口威胁</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q23', '2')">
                        <input type="radio" id="q23b" name="q23" value="2">
                        <label>
                            <span class="frequency-label">偶尔执行</span>
                            <span class="frequency-desc">看心情</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q23', '3')">
                        <input type="radio" id="q23c" name="q23" value="3">
                        <label>
                            <span class="frequency-label">一半一半</span>
                            <span class="frequency-desc">有时做到</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q23', '4')">
                        <input type="radio" id="q23d" name="q23" value="4">
                        <label>
                            <span class="frequency-label">大部分执行</span>
                            <span class="frequency-desc">通常做到</span>
                        </label>
                    </div>
                    <div class="frequency-option" onclick="selectFrequency(this, 'q23', '5')">
                        <input type="radio" id="q23e" name="q23" value="5">
                        <label>
                            <span class="frequency-label">都执行了</span>
                            <span class="frequency-desc">说到做到</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- 最后一题 - 自我认知 -->
            <div class="question-container">
                <div class="question-header">
                    <span class="question-number">第 24 题</span>
                    <span class="question-type">自我反思</span>
                </div>
                <div class="question-text">如果给您自己的育儿打分（0-10分），您会打几分？</div>
                <div class="question-subtext">（请诚实作答，这会帮助判断测评的准确性）</div>
                <div class="slider-container">
                    <div class="slider-labels">
                        <span class="slider-label left">做得很不好，有很多问题</span>
                        <span class="slider-label right">做得很好，几乎完美</span>
                    </div>
                    <input type="range" id="q24" name="q24" min="0" max="10" value="5" oninput="updateSliderValue(this, 'q24-value')">
                    <div class="slider-value" id="q24-value">5 分</div>
                </div>
            </div>

            <p class="error-message" id="errorMessage">请先完成所有问题再提交哦～</p>

            <div class="button-container">
                <button type="submit">🔍 查看我的真实育儿画像</button>
            </div>
        </form>

        <div class="results" id="results"></div>
    </div>

    <script>
        const totalQuestions = 24;
        
        // 定义维度 - 情感连接和规矩边界
        const responsivenessQuestions = [1, 5, 7, 9, 12, 13, 15, 16, 18, 21, 22];
        const demandignessQuestions = [2, 6, 8, 10, 11, 14, 17, 19, 23];
        
        // 一致性检测题组（同一维度的不同问法）
        const consistencyGroups = [
            { questions: [2, 10, 23], dimension: '规矩执行一致性' },
            { questions: [4, 8, 22], dimension: '情绪控制稳定性' },
            { questions: [7, 12, 16], dimension: '陪伴质量' }
        ];

        function updateProgress() {
            const answeredQuestions = document.querySelectorAll('input[type="radio"]:checked, input[type="range"]').length;
            const progress = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
            document.getElementById('progressText').textContent = `已完成 ${answeredQuestions} / ${totalQuestions} 题`;
        }

        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', function() {
                updateProgress();
                const parent = this.closest('.option');
                if (parent) {
                    const container = this.closest('.options');
                    if (container) {
                        container.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
                    }
                    parent.classList.add('selected');
                }
            });
        });

        document.querySelectorAll('input[type="range"]').forEach(slider => {
            slider.addEventListener('input', updateProgress);
        });

        // 让所有普通选项的整个区域都可以点击
        document.querySelectorAll('.option').forEach(option => {
            option.addEventListener('click', function(e) {
                // 如果点击的不是input或label，触发input点击
                const radio = this.querySelector('input[type="radio"]');
                const label = this.querySelector('label');
                
                if (radio && e.target !== radio && e.target !== label) {
                    radio.click();
                }
            });
        });

        function selectFrequency(element, questionName, value) {
            const container = element.closest('.question-container');
            if (container) {
                container.querySelectorAll('.frequency-option').forEach(opt => opt.classList.remove('selected'));
            }
            element.classList.add('selected');
            
            // 使用数组直接映射，更清晰
            const letters = ['a', 'b', 'c', 'd', 'e'];
            const radioId = questionName + letters[parseInt(value) - 1];
            const radio = document.getElementById(radioId);
            
            if (radio) {
                radio.checked = true;
                // 触发change事件以更新进度
                radio.dispatchEvent(new Event('change', { bubbles: true }));
            }
            
            updateProgress();
        }

        function updateSliderValue(slider, valueId) {
            document.getElementById(valueId).textContent = slider.value + ' 分';
        }

        function calculateScores(answers) {
            let responsivenessScore = 0;
            let responsivenessCount = 0;
            let demandignessScore = 0;
            let demandignessCount = 0;

            responsivenessQuestions.forEach(q => {
                const value = parseInt(answers['q' + q] || 0);
                if (value > 0) {
                    // 第13题是反向题，需要反转分数
                    if (q === 13) {
                        responsivenessScore += (6 - value);
                    } else {
                        responsivenessScore += value;
                    }
                    responsivenessCount++;
                }
            });

            demandignessQuestions.forEach(q => {
                const value = parseInt(answers['q' + q] || 0);
                if (value > 0) {
                    // 第14题期望值需要调整计分
                    if (q === 14) {
                        // 5分(尽力就好)得5分，1分(完全不在意)得1分，2-3分(高期望)得3-4分
                        if (value === 5) demandignessScore += 5;
                        else if (value === 4) demandignessScore += 4;
                        else if (value === 3) demandignessScore += 3;
                        else if (value === 2) demandignessScore += 3;
                        else demandignessScore += 1;
                    } else {
                        demandignessScore += value;
                    }
                    demandignessCount++;
                }
            });

            // 计算平均分并转换为百分比
            const responsivenessPercent = (responsivenessScore / (responsivenessCount * 5)) * 100;
            const demandignessPercent = (demandignessScore / (demandignessCount * 5)) * 100;

            return {
                responsiveness: responsivenessScore,
                responsivenessPercent: responsivenessPercent,
                demandigness: demandignessScore,
                demandignessPercent: demandignessPercent,
                selfRating: parseInt(answers['q24'] || 5, 10)
            };
        }

        function checkConsistency(answers) {
            const warnings = [];
            
            consistencyGroups.forEach(group => {
                const scores = group.questions.map(q => parseInt(answers['q' + q] || 0));
                const avg = scores.reduce((a, b) => a + b, 0) / scores.length;
                const variance = scores.reduce((sum, score) => sum + Math.pow(score - avg, 2), 0) / scores.length;
                
                // 如果方差大于4，说明回答不一致
                if (variance > 4) {
                    warnings.push(group.dimension);
                }
            });

            // 检测"完美化"倾向 - 如果太多5分选项
            const allScores = [];
            for (let i = 1; i <= totalQuestions; i++) {
                const value = parseInt(answers['q' + i] || 0);
                if (value > 0) allScores.push(value);
            }
            const fiveCount = allScores.filter(s => s === 5).length;
            const fivePercent = (fiveCount / allScores.length) * 100;
            
            if (fivePercent > 70) {
                warnings.push('选择过于理想化');
            }

            // 检测第13题（承认负面情绪）- 如果选1说明可能在美化
            if (parseInt(answers['q13']) === 1) {
                warnings.push('可能低估了育儿压力');
            }

            // 检测第4题（发火频率）- 如果选0次（值为5）需要注意
            if (parseInt(answers['q4']) === 5) {
                warnings.push('情绪控制描述可能过于完美');
            }

            return warnings;
        }

        function determineParentingStyle(scores) {
            const highResponsiveness = scores.responsivenessPercent >= 60;
            const highDemandingness = scores.demandignessPercent >= 60;

            if (highResponsiveness && highDemandingness) return 'authoritative';
            else if (!highResponsiveness && highDemandingness) return 'authoritarian';
            else if (highResponsiveness && !highDemandingness) return 'permissive';
            else return 'uninvolved';
        }

        const styleDetails = {
            authoritative: {
                title: '权威型（温暖而坚定）',
                description: '您在情感连接和规矩边界两方面都做得不错。孩子能感受到您的爱，也知道界限在哪里。这是最有利于孩子成长的育儿方式。',
                strengths: ['与孩子有良好的情感纽带', '能坚持必要的规则和界限', '愿意倾听并尊重孩子的想法', '在温暖中给予引导和结构'],
                improvements: ['保持耐心，继续学习成长', '在忙碌中也要保持陪伴质量', '随着孩子成长及时调整方式']
            },
            authoritarian: {
                title: '专制型（严格管教）',
                description: '您很注重规矩和管教，但在情感连接方面可能有所欠缺。孩子可能会觉得您更关注他"做得对不对"，而不太关心他"感受如何"。',
                strengths: ['有明确的期望和标准', '执行规则比较坚定', '重视孩子的教育和未来'],
                improvements: ['多一些拥抱和身体接触', '听听孩子的想法和感受', '解释规则的原因，而不只是命令', '允许合理的情绪表达', '在坚持原则的同时给予温暖']
            },
            permissive: {
                title: '放纵型（温暖但缺界限）',
                description: '您和孩子的关系很亲密温暖，但可能在设立界限和执行规则方面比较薄弱。担心管太严会影响亲子关系，但其实适当的界限能让孩子更有安全感。',
                strengths: ['与孩子关系亲密', '关注孩子的感受', '家庭氛围温暖'],
                improvements: ['设定清晰的规则并坚持执行', '说"不"也是爱的表达', '让孩子承担自然后果', '教会孩子延迟满足', '界限能帮助孩子建立自律']
            },
            uninvolved: {
                title: '忽视型（参与度较低）',
                description: '从测评来看，您在孩子生活中的参与度可能不够，无论是情感陪伴还是规矩管教。这可能是因为工作太忙、压力太大，或者其他原因。但孩子真的很需要父母的关注。',
                strengths: ['孩子可能发展出一定的独立性'],
                improvements: ['每天留出固定时间陪伴孩子', '主动关心他的感受和生活', '设立一些基本的家庭规则', '增加身体接触和情感表达', '如果感到力不从心，请寻求帮助']
            }
        };

        document.getElementById('assessmentForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(e.target);
            const answers = {};
            let allAnswered = true;

            for (let i = 1; i <= totalQuestions; i++) {
                const answer = formData.get('q' + i);
                if (!answer) {
                    allAnswered = false;
                    break;
                }
                answers['q' + i] = answer;
            }

            if (!allAnswered) {
                // 找出未完成的题目
                const unansweredQuestions = [];
                for (let i = 1; i <= totalQuestions; i++) {
                    const answer = formData.get('q' + i);
                    if (!answer) {
                        unansweredQuestions.push(i);
                    }
                }
                
                // 显示详细的错误信息
                const errorMsg = document.getElementById('errorMessage');
                errorMsg.innerHTML = `⚠️ 请先完成所有问题再提交！还有 <strong>${unansweredQuestions.length}</strong> 道题未完成：<br><span style="color: #d32f2f; font-weight: 600;">第 ${unansweredQuestions.join('、')} 题</span>`;
                errorMsg.style.display = 'block';
                
                // 滚动到第一个未完成的题目
                const firstUnanswered = document.querySelector(`[name="q${unansweredQuestions[0]}"]`);
                if (firstUnanswered) {
                    const container = firstUnanswered.closest('.question-container');
                    if (container) {
                        container.style.border = '3px solid #d32f2f';
                        container.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        setTimeout(() => {
                            container.style.border = '';
                            container.style.borderLeft = '4px solid #667eea';
                        }, 3000);
                    }
                }
                
                return;
            }

            const scores = calculateScores(answers);
            const warnings = checkConsistency(answers);
            const style = determineParentingStyle(scores);
            const details = styleDetails[style];

            let warningHTML = '';
            if (warnings.length > 0) {
                warningHTML = `
                    <div class="consistency-warning">
                        <h4>⚠️ 关于您的回答</h4>
                        <p>系统检测到以下问题：</p>
                        <ul style="margin-top: 10px; line-height: 2;">
                            ${warnings.map(w => `<li>${w}</li>`).join('')}
                        </ul>
                        <p style="margin-top: 10px;">这可能意味着：1) 您在不同情境下的表现确实差异较大，2) 部分回答可能不够真实。建议您重新审视这些维度的问题，诚实的回答会得到更有价值的反馈。</p>
                    </div>
                `;
            }

            const resultsHTML = `
                <div class="results-header">
                    <h2>您的育儿画像</h2>
                    <p>基于24道多维度题目的综合分析</p>
                </div>

                ${warningHTML}

                <div class="scores-grid">
                    <div class="score-card">
                        <h3>情感连接得分</h3>
                        <div class="score-bar-container">
                            <div class="score-bar" style="width: ${scores.responsivenessPercent}%">
                                ${Math.round(scores.responsivenessPercent)}%
                            </div>
                        </div>
                        <p style="color: #666; margin-top: 10px; line-height: 1.8;">
                            反映您和孩子的情感纽带、共情能力、陪伴质量
                        </p>
                    </div>

                    <div class="score-card">
                        <h3>规矩边界得分</h3>
                        <div class="score-bar-container">
                            <div class="score-bar" style="width: ${scores.demandignessPercent}%">
                                ${Math.round(scores.demandignessPercent)}%
                            </div>
                        </div>
                        <p style="color: #666; margin-top: 10px; line-height: 1.8;">
                            反映您设立规则、执行标准和监督引导的能力
                        </p>
                    </div>
                </div>

                <div class="style-result">
                    <h3>${details.title}</h3>
                    <p style="font-size: 1.1em; line-height: 1.9; margin-top: 15px;">${details.description}</p>
                </div>

                <div class="detailed-analysis">
                    <h3>📊 详细分析</h3>
                    
                    <div class="analysis-section">
                        <h4>✓ 您做得好的地方：</h4>
                        <ul>
                            ${details.strengths.map(s => `<li>${s}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="analysis-section">
                        <h4>→ 可以提升的方向：</h4>
                        <ul>
                            ${details.improvements.map(i => `<li>${i}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="analysis-section" style="background: #f0f4ff; padding: 20px; border-radius: 8px;">
                        <h4 style="color: #667eea;">💭 关于自我评分</h4>
                        <p>您给自己打了 <strong>${scores.selfRating}</strong> 分。${
                            scores.selfRating >= 8 ? 
                            '您对自己的育儿比较自信。这很好，但也要保持觉察，避免因为自信而忽视需要改进的地方。' :
                            scores.selfRating >= 5 ?
                            '这是一个比较客观的自我认知。育儿确实不容易，认识到不足才能持续进步。' :
                            '您对自己的育儿可能有些自我怀疑。每个父母都会犯错，重要的是愿意学习和改变。'
                        }</p>
                    </div>
                </div>

                <div style="background: #e8f5e9; padding: 30px; border-radius: 12px; margin-bottom: 30px; border-left: 4px solid #4caf50;">
                    <h3 style="color: #2e7d32; margin-bottom: 15px;">💚 最后想说的话</h3>
                    <p style="color: #1b5e20; line-height: 2; margin-bottom: 12px;">
                        育儿是一场马拉松，不是短跑。没有人天生就会当父母，我们都在摸索中成长。
                    </p>
                    <p style="color: #1b5e20; line-height: 2; margin-bottom: 12px;">
                        这个测评只是一个参考，帮您更清楚地看到自己。如果结果不理想，不要气馁；如果结果很好，也不要骄傲。
                    </p>
                    <p style="color: #1b5e20; line-height: 2;">
                        <strong>最重要的是：</strong>您愿意花时间做这个测评，说明您在乎，您想做得更好。这份在乎，就是最好的开始。
                    </p>
                </div>

                <div style="text-align: center; margin-top: 40px; padding-top: 30px; border-top: 2px solid #e0e0e0;">
                    <button onclick="restartAssessment()">重新测评</button>
                </div>
            `;

            document.getElementById('results').innerHTML = resultsHTML;
            document.getElementById('assessmentForm').style.display = 'none';
            document.getElementById('results').classList.add('show');
            document.querySelector('.progress-section').style.display = 'none';
            
            setTimeout(() => window.scrollTo({ top: 0, behavior: 'smooth' }), 100);
        });

        function restartAssessment() {
            document.getElementById('assessmentForm').reset();
            document.getElementById('assessmentForm').style.display = 'block';
            document.getElementById('results').classList.remove('show');
            document.getElementById('results').innerHTML = '';
            document.querySelector('.progress-section').style.display = 'block';
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('progressText').textContent = '已完成 0 / 24 题';
            document.querySelectorAll('.option, .frequency-option').forEach(opt => opt.classList.remove('selected'));
            document.querySelectorAll('input[type="range"]').forEach(slider => {
                slider.value = 5;
                updateSliderValue(slider, slider.id + '-value');
            });
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    </script>
</body>
</html>